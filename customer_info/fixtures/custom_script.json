[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2016-02-22 15:04:49.534898", 
  "name": "Customer-Client", 
  "script": "frappe.ui.form.on(\"Customer\",\"onload\",function(frm){\n    if(cur_frm.doc.customer_type == \"Individual\"){\n        cur_frm.set_df_property(\"first_name\", \"reqd\",true);\n    }\n})\n\nfrappe.ui.form.on(\"Customer\",\"customer_type\",function(frm){\n    if(cur_frm.doc.customer_type == \"Company\"){\n       cur_frm.set_df_property(\"first_name\", \"reqd\",false);\n       cur_frm.set_df_property(\"company_title\", \"reqd\",true);\n       cur_frm.doc.customer_group = \"Commercial\"\n       refresh_field('customer_group')      \n    }\n    if(cur_frm.doc.customer_type == \"Individual\"){\n       cur_frm.set_df_property(\"first_name\", \"reqd\",true);\n       cur_frm.set_df_property(\"company_title\", \"reqd\",false);\n       cur_frm.doc.customer_group = \"Individual\"\n       refresh_field('customer_group')      \n    }\n})\n\nfrappe.ui.form.on(\"Customer\",\"first_name\",function(frm){\n    if(cur_frm.doc.customer_type == \"Individual\"){\n        cur_frm.doc.customer_name = cur_frm.doc.first_name\n        refresh_field(\"customer_name\")\n    } \n    if(cur_frm.doc.first_name){\n        var n = cur_frm.doc.first_name;    \n        if(n.slice(-1) == \"s\" || n.slice(-1) == \"S\"){\n            cur_frm.doc.gender = \"M\"\n            refresh_field(\"gender\")\n        }\n        else{\n            cur_frm.doc.gender = \"F\"\n            refresh_field(\"gender\")\n        }\n    }\n    else{\n        cur_frm.doc.gender = \"\"\n        refresh_field('gender')\n    }\n})\n\nfrappe.ui.form.on(\"Customer\",\"last_name\",function(frm){\n    if(cur_frm.doc.customer_type == \"Individual\"){\n        cur_frm.doc.customer_name = cur_frm.doc.first_name +\" \"+ cur_frm.doc.last_name\n        refresh_field(\"customer_name\")\n    }\n})\n\nfrappe.ui.form.on(\"Customer\",\"company_title\",function(frm){\n    if(cur_frm.doc.customer_type == \"Company\"){\n        cur_frm.doc.customer_name = cur_frm.doc.company_title\n        refresh_field(\"customer_name\")\n    }\n})\n\nfrappe.ui.form.on(\"Customer\",\"birthdate\",function(frm){\n    if(cur_frm.doc.birthdate){\n        var d = moment().format('YYYY-MM-DD')\n        var current_date = new Date(d)\n        var b_date = new Date(cur_frm.doc.birthdate)\n        if(b_date >= current_date){\n            msgprint(__(\"'Birth Date' Not Greater Or Equal To Current Date\"))\n            cur_frm.doc.birthdate = \"\"\n            refresh_field('birthdate')\n        }\n    } \n    if(cur_frm.doc.birthdate){\n        var birthdate = new Date(cur_frm.doc.birthdate)\n        var cur = new Date();\n        var diff = cur-birthdate; // This is the difference in milliseconds\n        var age = Math.floor(diff/31536000000); // Divide by 1000*60*60*24*365\n        cur_frm.doc.age = age + \" \" +\" Years\"\n        refresh_field('age');\n    }\n    else{\n        cur_frm.doc.age = \"\"\n        refresh_field('age')\n    } \n})", 
  "script_type": "Client"
 }
]