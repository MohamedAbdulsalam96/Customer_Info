[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2016-02-18 16:50:59.840233", 
  "name": "Customer-Client", 
  "script": "frappe.ui.form.on(\"Customer\",\"birthdate\",function(frm){\n\tif(cur_frm.doc.birthdate){\n             var d = moment().format('YYYY-MM-DD')\n\t     var current_date = new Date(d)\n\t     var b_date = new Date(cur_frm.doc.birthdate)\n\t     if(b_date >= current_date){\n\t\tmsgprint(__(\"'Birth Date' Not Greater Or Equal To Current Date\"))\n\t\tcur_frm.doc.birthdate = \"\"\n\t\trefresh_field('birthdate')\n\t     }\n        } \n        if(cur_frm.doc.birthdate){\n\t\tvar birthdate = new Date(cur_frm.doc.birthdate)\n\t\tvar cur = new Date();\n\t\tvar diff = cur-birthdate; // This is the difference in milliseconds\n\t\tvar age = Math.floor(diff/31536000000); // Divide by 1000*60*60*24*365\n\t\tcur_frm.doc.age = age + \" \" +\" Years\"\n\t\trefresh_field('age');\n\t}\n\telse{\n\t\tcur_frm.doc.age = \"\"\n\t\trefresh_field('age')\n\t} \n})\n\nfrappe.ui.form.on(\"Customer\",\"onload\",function(frm){\n  if(cur_frm.doc.customer_type == \"Individual\"){\n     cur_frm.set_df_property(\"first_name\", \"reqd\",true);\n  }\n})\n\nfrappe.ui.form.on(\"Customer\",\"customer_type\",function(frm){\n        if(cur_frm.doc.customer_type == \"Company\"){\n           cur_frm.set_df_property(\"first_name\", \"reqd\",false);\n           cur_frm.set_df_property(\"company_title\", \"reqd\",true);\n           cur_frm.doc.customer_group = \"Commercial\"\n           refresh_field('customer_group')      \n        }\n        if(cur_frm.doc.customer_type == \"Individual\"){\n           cur_frm.set_df_property(\"first_name\", \"reqd\",true);\n           cur_frm.set_df_property(\"company_title\", \"reqd\",false);\n           cur_frm.doc.customer_group = \"Individual\"\n           refresh_field('customer_group')      \n        }\n})\n\nfrappe.ui.form.on(\"Customer\",\"first_name\",function(frm){\n     if(cur_frm.doc.customer_type == \"Individual\"){\n        cur_frm.doc.customer_name = cur_frm.doc.first_name\n        refresh_field(\"customer_name\")\n     }\n})\n\nfrappe.ui.form.on(\"Customer\",\"last_name\",function(frm){\n     if(cur_frm.doc.customer_type == \"Individual\"){\n        cur_frm.doc.customer_name = cur_frm.doc.first_name +\" \"+ cur_frm.doc.last_name\n        refresh_field(\"customer_name\")\n     }\n})\nfrappe.ui.form.on(\"Customer\",\"company_title\",function(frm){\n     if(cur_frm.doc.customer_type == \"Company\"){\n        cur_frm.doc.customer_name = cur_frm.doc.company_title\n        refresh_field(\"customer_name\")\n     }\n})", 
  "script_type": "Client"
 }
]