{
 "add_total_row": 0, 
 "apply_user_permissions": 1, 
 "creation": "2017-04-26 13:07:05.456050", 
 "disabled": 0, 
 "docstatus": 0, 
 "doctype": "Report", 
 "idx": 0, 
 "is_standard": "Yes", 
 "modified": "2017-04-28 13:58:11.536177", 
 "modified_by": "Administrator", 
 "module": "Customer Info", 
 "name": "Long term debtors", 
 "owner": "Administrator", 
 "query": "select\nca.name as \"Agreement Number:Link/Customer Agreement:150\",\nca.migrated_agreement_id as \"Migrated agreement ID::150\",\ncus.first_name as \"Customer Name::100\",\ncus.last_name as \"Surname::100\",\ncus.prersonal_code as \"Personal Code::100\",\ncus.company_phone_1 as \"Phone::100\",\ncus.company_email_id_1 as \"Email Id::100\",\n(select ad.city from `tabAddress` ad where ad.customer = cus.name and ad.is_primary_address=1) as \"City::100\",\n(select concat(ad.address_line1,\"\\n\",ad.address_line2) from `tabAddress` ad where ad.customer = cus.name and ad.is_primary_address=1) as \"Address::100\",\ncus.spouse_first_name as \"Spouse First Name:100\",\ncus.spouse_last_name as \"Spouse Last name::100\",\ncus.spouse_contact_no as \"Spouse Contact No::100\",\nca.date as \"Agreement Start Date::180\",\nca.agreement_period as \"Agreement period::150\",\nca.agreement_close_date as \"Agreement Close Date::180\",\nca.current_due_date as \"Oldest due date::\",\nca.product as \"Product:Link/Item:150\",\n\n(select format(sum(CASE WHEN t1.due_date < CURDATE() AND DATEDIFF(CURDATE(),t1.due_date) > 3  THEN t1.monthly_rental_amount ELSE 0 END),2) AS late_payments from `tabPayments Record` t1 where t1.parent=ca.name and t1.check_box_of_submit = 0) as \"Late Payments::100\",\n\n(select format(sum(t1.monthly_rental_amount),2) AS balance from `tabPayments Record` t1 where t1.parent=ca.name and t1.check_box_of_submit = 0) as \"Total amount of unpaid and to be paid payments::200\",\n\n(select format(sum(CASE WHEN t1.due_date < CURDATE() AND DATEDIFF(CURDATE(),t1.due_date) > 3  THEN (DATEDIFF(CURDATE(),t1.due_date) - 3) * t1.monthly_rental_amount * (2/100) ELSE 0 END),2) AS late_fees from `tabPayments Record` t1 where t1.parent=ca.name and t1.check_box_of_submit = 0) as \"Late Fees::100\",\n\n\n(select format(sum(CASE WHEN t1.due_date < CURDATE() AND DATEDIFF(CURDATE(),t1.due_date) > 3  THEN (DATEDIFF(CURDATE(),t1.due_date) - 3) * t1.monthly_rental_amount * (2/100)+t1.monthly_rental_amount ELSE 0 END),2) AS late_payments from `tabPayments Record` t1 where t1.parent=ca.name and t1.check_box_of_submit = 0)  as \"Late Payments + Late Fees::100\",\n\nca.late_fees_rate as \"Late Fees Rate %%:Float:150\"\nfrom `tabCustomer Agreement` ca ,`tabCustomer` cus\nwhere ca.customer = cus.name and ca.debtor = \"Yes\";", 
 "ref_doctype": "Customer Agreement", 
 "report_name": "Long term debtors", 
 "report_type": "Query Report"
}